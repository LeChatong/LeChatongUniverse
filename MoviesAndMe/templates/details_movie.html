{% extends 'home_movie.html' %}
{% load static %}
{% block META_OG %}
    <meta property="og:title" content="{{ title }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{% url 'details_movie' id %}">
    <meta property="og:image" content="https://image.tmdb.org/t/p/w1280{{ backdrop_path }}">
    <meta property="og:image:width" content="800">
    <meta property="og:image:height" content="300">
    <meta property="og:description" content="{{ overview|truncatechars:250 }}">
    <meta property="fb:app_id" content="{{ '285736978971421' }}">
    <meta property="twitter:card" content="summary">
{% endblock %}
{% block intitule_page %} {{ title }}{% endblock %}
{% block link_menu %}
    <a href="{% url 'home_movie' %}" class="list-group-item  list-group-item-action">
        <i class="text-left"><img width="32" height="32" src="{% static 'sun-black.png' %}"></i>
        {{ 'Nouveautés' }}
    </a>
    <a href="{% url 'popular_movie' 1 %}" class="list-group-item list-group-item-action">{{ 'Populaires' }}</a>
    <a href="{% url 'upcoming_movie' 1 %}" class="list-group-item list-group-item-action">{{ 'A venir' }}</a>
    <a href="{% url 'donwload_movie_content' %}" class="list-group-item list-group-item-action">{{ 'Téléchargeable' }}</a>
{% endblock %}
{% block details_page %}
    <div class="row">
        <div class="col-lg-12" style="margin-top: 20px;">
            <div class="card mt-4">
                {% if backdrop_path != None %}
                    <img width="800" height="300" class="card-img-top img-fluid" src="https://image.tmdb.org/t/p/w1280{{ backdrop_path }}" alt="{{ title }}">
                {% else %}
                    <img width="800" height="300" class="card-img-top" src="{% static 'not_image_disponible.svg.png' %}" alt="{{ title }}">
                {% endif %}

                <div class="card-body">
                <h3 class="card-title">
                    <div class="row">
                        <div class="col-lg-8">
                            {% if homepage != None %}
                                <a class="text-dark" href="{{ homepage }}" target="_blank">{{ title }}</a>
                            {% else %}
                                <a href="#">{{ title }}</a>
                            {% endif %}
                        </div>
                        <div class="col-lg-1">
                            <a class="twitter-share-button" data-size="large" href="https://twitter.com/intent/tweet">
                                @LeChatong
                            </a>
                            <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                        </div>
                        <div class="col-lg-1">
                            <div class="fb-share-button" data-href="{% url 'details_movie' id %}" data-layout="button" data-size="large">
                                <a target="_blank" href="{% url 'details_movie' id %}" class="fb-xfbml-parse-ignore">Partager</a>
                            </div>
                            <div id="fb-root"></div>
                            <script async defer crossorigin="anonymous" src="https://connect.facebook.net/fr_FR/sdk.js#xfbml=1&version=v3.3"></script>
                        </div>

                    </div>
                </h3>

                <p>
                    {% for genre in genres %}
                        <a href="#">{{ genre.name }}</a>,
                    {% endfor %}
                </p>
                {% if m_details != None %}
                    <p>
                        <sup><a type="button" class="btn btn-success" data-toggle="modal" data-target="#downloadModal" href="">{{ 'Télécharger' }}</a> </sup>
                    </p>
                    <div class="modal fade" id="downloadModal" tabindex="-1" role="dialog" aria-labelledby="downloadModalLabel" aria-hidden="true">
                      <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Lien de Téléchargement</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body">
                            <table class="table-responsive-xl table thead-light">
                                <thead class="">
                                    <tr>
                                        <th scope="col">Langue</th>
                                        <th scope="col">Vidéo</th>
                                        <th scope="col">Audio</th>
                                        <th scope="col">Sous-titré?</th>
                                        <th scope="col">Lien</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for elt in m_details %}
                                        <tr>
                                            <td>{{ elt.1 }}</td>
                                            <td>{{ elt.3 }}</td>
                                            <td>{{ elt.4 }}</td>
                                            <td>{{ elt.5 }} ({{ elt.6 }})</td>
                                            <td>
                                                <a target="_blank" href="{{ elt.2 }}">
                                                    <i class="align-left"><img src="{% static 'download.png' %}"></i>
                                                    Télécharger
                                                </a>
                                            </td>
                                        </tr>
                                    {% endfor %}

                                </tbody>
                            </table>
                          </div>
                            <div class="modal-footer">
                                <p><a class="bold" href="https://desktop.telegram.org/" target="_blank">{{ '*Telegram' }}</a> {{ ' requis' }}</p>
                            </div>
                        </div>
                      </div>
                    </div>
                {% endif %}
                <p class="card-text text-justify">{{ overview }}</p>
                <span title="Note du film : {{ vote_average }} / 10" class="text-warning">
                    {% for i in COUNTEUR %}
                        {% if i < vote_average %}&#9733;{% else %}&#9734;{% endif %}
                    {% endfor %}
                </span>
                <p>
                    <span>Sortie le : </span>{{ release_date|date:'d M Y' }}
                </p>
              </div>
            </div>
            {% if m_details != None %}
                {% for elt in m_details %}
                    <div class="card mt-4">
                        <video controls class="" title="{{ title }}" width="800" height="300" autoplay loop>
                            <source src="{{ elt.2 }}" type="video/mp4" />
                            Your browser does not support the video tag.
                        </video>
                    </div>

                {% endfor %}
            {% endif %}

            <!-- /.card -->
            <div class="card card-outline-secondary my-4">
                <div class="card-header">
                    Acteurs
                </div>
                <div class="card-body">
                    <div class="row">
                        {% for actor in list_actor %}
                            <div class="col-lg-2 text-center">
                                {% if actor.2 == None %}
                                    <a href="{% url 'details_actor' actor.0 %}" title="{{ actor.1 }}">
                                        <img width="75" height="75" alt="{{ actor.3 }}" class="rounded-circle" src="{% static 'not_image_disponible.svg.png' %}">
                                    </a>
                                {% else %}
                                    <a href="{% url 'details_actor' actor.0 %}" title="{{ actor.1 }}">
                                        <img width="75" height="75" alt="{{ actor.3 }}" class="rounded-circle" src="https://image.tmdb.org/t/p/w300{{ actor.2 }}">
                                    </a>
                                {% endif %}
                                <div>
                                    <sub><a href="{% url 'details_actor' actor.0 %}" title="{{ actor.3 }}">{{ actor.1 }}</a></sub>
                                </div>
                            </div>
                        {% endfor %}
                        <div class="col-lg-2 text-center">
                            <a href="#">
                                <img width="75" height="75" alt="#" class="rounded-circle" src="{% static 'not_image_disponible.svg.png' %}">
                            </a>
                            <div>
                                <sub><a href="{% url 'actors_on_movie' id %}">Voir Plus</a></sub>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="card card-outline-secondary my-4">
              <div class="card-header">
                Sociétés de Production
              </div>
              <div class="card-body">
                <div class="row">
                    {% for company in production_companies %}
                        <div class="col-lg-2 text-center">
                            {% if company.logo_path == None %}
                                <a href="#">
                                    <img width="75" height="75" alt="{{ company.name }}" class="rounded-circle" src="{% static 'not_image_disponible.svg.png' %}">
                                </a>
                            {% else %}
                                <a href="#">
                                    <img width="75" height="75" alt="{{ company.name }}" class="rounded-circle" src="https://image.tmdb.org/t/p/w200{{ company.logo_path }}">
                                </a>
                            {% endif %}
                            <div>
                                <sub><a href="#">{{ company.name }}, {{ company.origin_country }}</a></sub>
                            </div>

                        </div>
                    {% endfor %}
                </div>

              </div>
            </div>
            <div class="card card-outline-secondary my-4">
                <div class="card-header">
                    Films Similaires
                </div>
                <div class="card-body">
                    <div class="row">
                        {% for similar_movie in LIST_SIMILAR_MOVIES %}
                            <div class="col-lg-2 col-md-3 mb-1">
                                <div class="card h-auto">
                                  <a href="{% url 'details_movie' similar_movie.0 %}">
                                      {% if similar_movie.2 != None %}
                                        <img class="card-img-top" src="https://image.tmdb.org/t/p/w500{{ similar_movie.2 }}" alt="{{ similar_movie.1 }}">
                                    {% else %}
                                        <img class="card-img-top" src="{% static 'not_image_disponible.svg.png' %}" alt="{{ similar_movie.1 }}">
                                    {% endif %}

                                  </a>
                                    <p class="card-title text-center">
                                      <a href="{% url 'details_movie' similar_movie.0 %}">{{ similar_movie.1 }}</a>
                                    </p>
                                </div>
                          </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <!-- /.card -->


        </div>
    </div>
{% endblock %}