{% extends 'home_tv.html' %}
{% load static %}
{% block META_OG %}
    <meta property="og:title" content="{{ name_tv }}-{{ name_season }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{% url 'details_tv_season' id season_number %}">
    <meta property="og:image" content="https://image.tmdb.org/t/p/w1280{{ poster_path }}">
    <meta property="og:image:width" content="800">
    <meta property="og:image:height" content="300">
    <meta property="og:description" content="{{ overview|truncatechars:250 }}">
    <meta property="fb:app_id" content="{{ '285736978971421' }}">
    <meta property="twitter:card" content="summary">
{% endblock %}

{% block intitule_page %}{{ name_tv }}-{{ name_season }}{% endblock %}
{% block link_menu %}
    <a href="{% url 'home_tv' %}" class="list-group-item list-group-item-action">
        <i class="text-left"><img width="32" height="32" src="{% static 'sun-black.png' %}"></i>
        {{ 'Nouveautés' }}
    </a>
    <a href="{% url 'popular_tv' 1 %}" class="list-group-item list-group-item-action">{{ 'Populaires' }}</a>
    <a href="{% url 'donwload_tv_content' %}" class="list-group-item list-group-item-action">{{ 'Téléchargeables' }}</a>
{% endblock %}
{% block details %}
    <div class="col-lg-12" style="margin-top: 20px;">
        <nav aria-label="breadcrumb">
              <ol class="breadcrumb dark-theme">
                <li class="breadcrumb-item"><a class="text-dark" href="{% url 'home' %}">Accueil</a></li>
                <li class="breadcrumb-item"><a class="text-dark" href="{% url 'home_tv' %}">Séries & animes</a></li>
                  <li class="breadcrumb-item"><a class="text-dark" href="{% url 'details_tv' id %}">{{ name_tv }}</a></li>
                <li class="breadcrumb-item active" aria-current="page">{{ name_season }}</li>
              </ol>
            </nav>
        <div class="row">
                <div class="col-lg-4">
                    <div class="card mt-4">
                        {% if poster_path != None %}
                            <img width="100" height="110" class="card-img-top img-fluid" src="https://image.tmdb.org/t/p/w1280{{ poster_path }}" alt="{{ name_tv }}-{{ name_season }}">
                        {% else %}
                            <img width="100" height="110" class="card-img-top" src="{% static 'not_image_disponible.svg.png' %}" alt="{{ name_tv }}-{{ name_season }}">
                        {% endif %}
                    </div>
                </div>
                <div class="col-lg-8">
                    <div class="mt-4">
                        <div class="h2">
                            {{ name_tv }}-{{ name_season }}
                        </div>
                        <p>

                            <div>
                                Sortie le : {% if air_date != None %}{{ air_date|date:'d M Y' }}{% else %}{{ 'Non Précisé' }}{% endif %}
                            </div>
                        </p>
                        <div class="text-justify">
                            <b>Description</b>
                            <p>
                                {{ overview }}
                            </p>

                        </div>
                    </div>
                    <div class="mt-4">
                        <span>
                            <a class="twitter-share-button" data-size="large" href="https://twitter.com/intent/tweet">
                                @LeChatong
                            </a>
                            <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                        </span>
                        <span>
                            <div id="fb-root" class="text-justify"></div>
                              <script>(function(d, s, id) {
                                var js, fjs = d.getElementsByTagName(s)[0];
                                if (d.getElementById(id)) return;
                                js = d.createElement(s); js.id = id;
                                js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0";
                                fjs.parentNode.insertBefore(js, fjs);
                              }(document, 'script', 'facebook-jssdk'));</script>
                            <div class="fb-share-button"
                                data-href="{% url 'details_tv' id %}"
                                 data-size="large"
                                data-layout="button_count">
                                Partager
                            </div>
                        </span>
                    </div>
                </div>
            </div>
        <hr/>
        <div class="row">
                <div class="col-lg-12">
                    <div class="h2"><b>Episodes</b></div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Affiche</th>
                                <th scope="col">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for episode in EPISODES %}
                                <tr>
                                    <td style="width: 200px;">
                                        {% if episode.5 != None %}
                                            <img width="150" height="150" src="https://image.tmdb.org/t/p/w1280{{ episode.5 }}">
                                        {% else %}
                                            <img width="150" height="150" src="{% static 'not_image_disponible.svg.png' %}">
                                        {% endif %}

                                    </td>
                                    <td class="text-justify">
                                        <a class="h4 text-dark" href="#">{{ episode.1 }}</a>
                                        <div><sup>{{ episode.2|date:'d M Y' }}</sup></div>
                                        <div>{{ episode.4 }}</div>
                                        {% if episode.6 != None %}
                                            <div class="">
                                                <a class="badge badge-success" data-toggle="modal" data-target="#downloadModal-{{ episode.3 }}" href="">
                                                    {{ 'Télécharger' }}
                                                </a>
                                            </div>
                                            <div class="modal fade" id="downloadModal-{{ episode.3 }}" tabindex="-1" role="dialog" aria-labelledby="downloadModalLabel-{{ episode.3 }}" aria-hidden="true">
                                              <div class="modal-dialog modal-lg" role="document">
                                                <div class="modal-content">
                                                  <div class="modal-header">
                                                    <h5 class="modal-title" id="exampleModalLabel">Lien de Téléchargement</h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                      <span aria-hidden="true">&times;</span>
                                                    </button>
                                                  </div>
                                                  <div class="modal-body">
                                                      <div class="container-fluid">
                                                          <table class="table-responsive-xl table thead-light">
                                                            <thead>
                                                                <tr>
                                                                    <th scope="col">Langue</th>
                                                                    <th scope="col">Vidéo</th>
                                                                    <th scope="col">Audio</th>
                                                                    <th scope="col">Sous-titré?</th>
                                                                    <th scope="col">Lien</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                {% for elt in episode.6 %}
                                                                    <tr>
                                                                        <td>{{ elt.1 }}</td>
                                                                        <td>{{ elt.3 }}</td>
                                                                        <td>{{ elt.4 }}</td>
                                                                        <td>{{ elt.5 }} ({{ elt.6 }})</td>
                                                                        <td>
                                                                            <a target="_blank" href="{{ elt.2 }}">
                                                                                <i class="align-left"><img src="{% static 'download.png' %}"></i>
                                                                            </a>
                                                                        </td>
                                                                    </tr>
                                                                {% endfor %}
                                                            </tbody>
                                                        </table>
                                                      </div>

                                                  </div>
                                                    <div class="modal-footer">
                                                        <p><a class="bold" href="https://desktop.telegram.org/" target="_blank">{{ '*Telegram' }}</a> {{ ' requis' }}</p>
                                                    </div>
                                                </div>
                                              </div>
                                            </div>
                                        {% endif %}
                                    </td>
                                </tr>

                            {% endfor %}
                        </tbody>

                    </table>
                </div>
            </div>
    </div>
{% endblock %}